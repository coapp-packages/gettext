#product-info
{
    product-name: "gettext";
    version: "0.18.1.1";
    original-source-location: "http://ftp.gnu.org/pub/gnu/gettext/gettext-0.18.1.1.tar.gz";
    original-source-website: "http://www.gnu.org/software/gettext/";
    license: "GNU";
    packager: "Rafael Rivera <rafael@withinwindows.com>";
}

default
{
    compiler: mingw;
    platform: x86;
 
    uses: "..\libiconv";
 
    targets:
    {
      //"gettext-runtime\libasprintf\.libs\libasprintf-0.dll", // unusable because of deps on mingw, probably not needed anyway

      "gettext-runtime\intl\.libs\libintl-8.dll",
      
      "gettext-runtime\src\.libs\envsubst.exe",
      "gettext-runtime\src\.libs\ngettext.exe",
      "gettext-runtime\src\.libs\gettext.exe"
    };
 
    build-command: @"
      :// TODO: libacl is needed for ACL support. Need to investigate if
      :// we care about this.
    
      :// FIX: In this environment, only USE_WIN32_THREADS should be used.
      :// By default, USE_POSIX_THREADS is defined which will cause a failure
      :// in the compilation of some tests hence the --enable-threads=win32.

      sh coapp-build.sh
      
      copy gettext-runtime\intl\.libs\libintl.dll.a gettext-runtime\intl\.libs\intl.lib

    ";
 
    clean-command: @"
      del gettext-runtime\intl-csharp\*.pdb 2>NUL

	  cd gettext-runtime

	  IF EXIST Makefile make distclean
      if exist gettext-runtime\intl\.libs\intl.lib erase gettext-runtime\intl\.libs\intl.lib
    ";
}